<!-- 
Author : kunchala Anil
Date : Nov 9 2016

This code is used to publish a mqtt message to the adafruitMqqIO using paho Mqtt Javascript Client Library
-->
<!DOCTYPE html>
<html>
        <head>
           <title>
                Verificatin Page
           </title>
                <!-- include jQuery and Paho client Javascript source files -->
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"> </script>
                <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
               
        </head>

        <body>
                <p> This is a Testing Page for Padma1v2 </p>

                <button type="button"  id="onBtn" >RLY ON</button>
                <button type="button"  id="offBtn">RLY OFF</button>

                <p> To see the Values please Visit the <a href="http://pamda1ver2.16mb.com//padma.php"> link </a> </p>
                <p> Done By: anilkunchalaece (anilkunchalaece@gmail.com) </p>

        <script>
                $("#onBtn").click(function(){
                                        client = new Paho.MQTT.Client("io.adafruit.com", 443, "anil");
                                        // connect the client
                                        client.connect({onSuccess: onBtnFcn,
                                                        userName : "anilkunchalaece",
                                                        password : "..",
                                                        useSSL : true});

                                        // called when the client connects
                                                function onBtnFcn() {
                                                        // Once a connection has been made, make a subscription and send a message.
                                                        alert("On Fcn");
                                                        //client.subscribe("anilkunchalaece/feeds/rly");
                                                        message = new Paho.MQTT.Message("ON");
                                                        message.destinationName = "anilkunchalaece/feeds/rly";
                                                        client.send(message);
                                                        console.log("Message ON Published");
                                                        client.disconnect();
                                                        }

                                        })

                $("#offBtn").click(function(){
                                                client = new Paho.MQTT.Client("io.adafruit.com",443,"anil");
                                                
                                                //connect to the client
                                                client.connect({onSuccess : offBtnFcn,
                                                                userName : "anilkunchalaece",
                                                                password : "..",
                                                                 useSSL : true})
                                
                                                //onSucess Callback function
                                                function offBtnFcn(){
                                                                message = new Paho.MQTT.Message("OFF");
                                                                message.destinationName = "anilkunchalaece/feeds/rly";
                                                                client.send(message);
                                                                console.log("message OFF Published");
                                                                client.disconnect();
                                                                }
                                
                                                })
        </script>

        </body>
</html>	
